---
import Gallery from "../components/Gallery.astro";
import TranslateModel from "../components/TranslateModel.astro";
import Default from "../layouts/Default.astro";

export async function getStaticPaths() {
  const { readdirSync } = await import("fs");
  const imageDirs = readdirSync("./public/images");

  return [...imageDirs].map((imagePath) => {
    const images = readdirSync("./public/images/" + imagePath).map(
      (image) => `/images/${imagePath}/${image}`
    );
    return {
      params: { gallery: `gallerie/${imagePath}` },
      props: { images, name: imagePath },
    };
  });
}
interface Props {
  images: string[];
  name: string;
}
const { images, name } = Astro.props;
---

<Default title={name + " Gallerie"} description={`${images.length} Bilder`}>
  <h2>
    <TranslateModel text={name} /> Gallerie
  </h2>

  <Gallery images={images} />
  <div class="grid grid-cols-2 content-center gap-2">
    {
      images.map((image) => {
        return (
          <label for={image} class="h-full w-full cursor-pointer">
            <img class="h-full w-full object-cover rounded-sm" src={image} />
          </label>
        );
      })
    }
  </div>
</Default>
