---
import { getCollection } from "astro:content";
import PostsByCategory from "../components/PostsByCategory.astro";
import Default from "../layouts/Default.astro";

export async function getStaticPaths() {
  const categories = new Set(
    (await getCollection("posts")).map((post) => post.slug.split("/")[0])
  );
  console.log(categories);
  return [...categories].map((category) => {
    return {
      params: { category },
      props: { name: category },
    };
  });
}
interface Props {
  name: string;
}

const { name } = Astro.props;
---

<Default title={name.toUpperCase()}>
  <PostsByCategory category={name} />
</Default>
